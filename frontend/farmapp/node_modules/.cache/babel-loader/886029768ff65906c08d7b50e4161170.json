{"ast":null,"code":"import _regeneratorRuntime from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/createClass\";import reqMessage from\"./reqMessage\";import Sensordevice from\"./commonjs/sensordevice\";import Outputdevice from\"./commonjs/outputdevice\";import AutoControl from\"./commonjs/autocontrol\";import responseMessage from\"./commonjs/responseMessage\";var API=\"/api/\";var IndoorFarmAPI=/*#__PURE__*/function(){function IndoorFarmAPI(){_classCallCheck(this,IndoorFarmAPI);}_createClass(IndoorFarmAPI,null,[{key:\"postData\",value:function(){var _postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=_args.length>0&&_args[0]!==undefined?_args[0]:\"\";data=_args.length>1&&_args[1]!==undefined?_args[1]:{};_context.next=4;return fetch(url,{method:\"POST\",// *GET, POST, PUT, DELETE, etc.\nmode:\"cors\",// no-cors, *cors, same-origin\ncache:\"no-cache\",// *default, no-cache, reload, force-cache, only-if-cached\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)// \n});case 4:response=_context.sent;return _context.abrupt(\"return\",response.json());case 6:case\"end\":return _context.stop();}}},_callee);}));function postData(){return _postData.apply(this,arguments);}return postData;}()},{key:\"getsensordatas\",value:function(){var _getsensordatas=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resdata;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.getRequest(true,false,false,false);case 2:resdata=_context2.sent;if(!resdata){_context2.next=5;break;}return _context2.abrupt(\"return\",resdata.Sensors);case 5:return _context2.abrupt(\"return\",null);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function getsensordatas(){return _getsensordatas.apply(this,arguments);}return getsensordatas;}()},{key:\"getoutputstatus\",value:function(){var _getoutputstatus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var resdata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.getRequest(false,true,false,false);case 2:resdata=_context3.sent;if(!resdata){_context3.next=5;break;}return _context3.abrupt(\"return\",resdata.Outputs);case 5:return _context3.abrupt(\"return\",null);case 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function getoutputstatus(){return _getoutputstatus.apply(this,arguments);}return getoutputstatus;}()},{key:\"getautocontrols\",value:function(){var _getautocontrols=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.getRequest(true,true,true,true);case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},_callee4,this);}));function getautocontrols(){return _getautocontrols.apply(this,arguments);}return getautocontrols;}()// 서버에 데이터 저장 요청\n},{key:\"setRequest\",value:function(){var _setRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(mItems,isautocfg,isdevcofig,ismanual){var isok,reqmsg,resdata;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:isok=false;console.log(\" setDeviceconfigsetup rsp : \"+isok);_context5.prev=2;reqmsg=new reqMessage(\"IF9999\");reqmsg.setDeviceconfig=isdevcofig;reqmsg.Deviceconfigitem=mItems;reqmsg.setAutocontrol=isautocfg;reqmsg.Autoconfigitem=mItems;reqmsg.setManualControl=ismanual;reqmsg.OutputManual.push(mItems);_context5.next=12;return IndoorFarmAPI.postData(API+\"farmrequest\",reqmsg);case 12:resdata=_context5.sent;console.log(\" setRequest rsp : \"+resdata.IsOK);isok=true;_context5.next=20;break;case 17:_context5.prev=17;_context5.t0=_context5[\"catch\"](2);console.log(\" setRequest error : \"+_context5.t0);case 20:_context5.prev=20;console.log(\" setRequest finally  : \"+isok);return _context5.abrupt(\"return\",isok);case 24:case\"end\":return _context5.stop();}}},_callee5,null,[[2,17,20,24]]);}));function setRequest(_x,_x2,_x3,_x4){return _setRequest.apply(this,arguments);}return setRequest;}()//서버에 상태및 정보 요청\n},{key:\"getRequest\",value:function(){var _getRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(isensor,isoutdev,isautostate,isautocontrol){var mrepmsg,reqmsg,resdata;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:mrepmsg=new responseMessage();_context6.prev=1;reqmsg=new reqMessage(\"IF9999\");//자동제어  센서목록, 출력목록 다 가져옴\nreqmsg.getAutoControlstate=isautostate;reqmsg.getSensors=isensor;reqmsg.getOutputport=isoutdev;reqmsg.getAutoControl=isautocontrol;_context6.next=9;return IndoorFarmAPI.postData(API+\"farmrequest\",reqmsg);case 9:resdata=_context6.sent;resdata.AutoControls.forEach(function(element){mrepmsg.AutoControls.push(AutoControl.Clonbyjsonobj(element));});resdata.Sensors.forEach(function(element){mrepmsg.Sensors.push(Sensordevice.Clonbyjsonobj(element));});resdata.Outputs.forEach(function(element){mrepmsg.Outputs.push(Outputdevice.Clonbyjsonobj(element));});_context6.next=18;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](1);console.log(\" getRequest error : \"+_context6.t0);case 18:_context6.prev=18;console.log(\" getRequest finally  : \"+mrepmsg);return _context6.abrupt(\"return\",mrepmsg);case 22:case\"end\":return _context6.stop();}}},_callee6,null,[[1,15,18,22]]);}));function getRequest(_x5,_x6,_x7,_x8){return _getRequest.apply(this,arguments);}return getRequest;}()},{key:\"setmanualonoff\",value:function(){var _setmanualonoff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(moutputport){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.setRequest(moutputport,false,false,true);case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee7,this);}));function setmanualonoff(_x9){return _setmanualonoff.apply(this,arguments);}return setmanualonoff;}()},{key:\"setAutocontrolsetup\",value:function(){var _setAutocontrolsetup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(mAutocfg){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.setRequest(mAutocfg,true,false,false);case 2:return _context8.abrupt(\"return\",_context8.sent);case 3:case\"end\":return _context8.stop();}}},_callee8,this);}));function setAutocontrolsetup(_x10){return _setAutocontrolsetup.apply(this,arguments);}return setAutocontrolsetup;}()},{key:\"setDeviceconfigsetup\",value:function(){var _setDeviceconfigsetup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(mDevcfg){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.setRequest(mDevcfg,false,true,false);case 2:return _context9.abrupt(\"return\",_context9.sent);case 3:case\"end\":return _context9.stop();}}},_callee9,this);}));function setDeviceconfigsetup(_x11){return _setDeviceconfigsetup.apply(this,arguments);}return setDeviceconfigsetup;}()}]);return IndoorFarmAPI;}();export{IndoorFarmAPI as default};","map":{"version":3,"sources":["H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/src/indoorfarmapi.js"],"names":["reqMessage","Sensordevice","Outputdevice","AutoControl","responseMessage","API","IndoorFarmAPI","url","data","fetch","method","mode","cache","headers","body","JSON","stringify","response","json","getRequest","resdata","Sensors","Outputs","mItems","isautocfg","isdevcofig","ismanual","isok","console","log","reqmsg","setDeviceconfig","Deviceconfigitem","setAutocontrol","Autoconfigitem","setManualControl","OutputManual","push","postData","IsOK","isensor","isoutdev","isautostate","isautocontrol","mrepmsg","getAutoControlstate","getSensors","getOutputport","getAutoControl","AutoControls","forEach","element","Clonbyjsonobj","moutputport","setRequest","mAutocfg","mDevcfg"],"mappings":"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","sourcesContent":["import reqMessage from \"./reqMessage\";\r\n\r\nimport Sensordevice from \"./commonjs/sensordevice\";\r\nimport Outputdevice from \"./commonjs/outputdevice\";\r\nimport AutoControl from \"./commonjs/autocontrol\";\r\nimport responseMessage from \"./commonjs/responseMessage\";\r\n\r\nconst API = \"/api/\";\r\n\r\nexport default class IndoorFarmAPI {\r\n\r\n  static async postData(url = \"\", data = {}) {\r\n    const response = await fetch(url, {\r\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\r\n      mode: \"cors\", // no-cors, *cors, same-origin\r\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\r\n\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      body: JSON.stringify(data), // \r\n    });\r\n    return response.json(); \r\n  }\r\n\r\n  static async getsensordatas() {\r\n    const resdata = await this.getRequest(true, false, false, false);\r\n    if (resdata) {\r\n      return resdata.Sensors;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static async getoutputstatus() {\r\n    const resdata = await this.getRequest(false, true, false, false);\r\n    if (resdata) {\r\n      return resdata.Outputs;\r\n    }\r\n    return null;\r\n  }\r\n  static async getautocontrols() {\r\n    return await this.getRequest(true, true, true, true);\r\n  }\r\n\r\n  // 서버에 데이터 저장 요청\r\n  static async setRequest(mItems, isautocfg, isdevcofig, ismanual) {\r\n    let isok = false;\r\n\r\n    console.log(\" setDeviceconfigsetup rsp : \" + isok);\r\n    try {\r\n      const reqmsg = new reqMessage(\"IF9999\");\r\n      reqmsg.setDeviceconfig = isdevcofig;\r\n      reqmsg.Deviceconfigitem = mItems;\r\n      reqmsg.setAutocontrol = isautocfg;\r\n      reqmsg.Autoconfigitem = mItems;\r\n      reqmsg.setManualControl = ismanual;\r\n      reqmsg.OutputManual.push(mItems);\r\n\r\n      const resdata = await IndoorFarmAPI.postData(API + \"farmrequest\", reqmsg);\r\n      \r\n      console.log(\" setRequest rsp : \" + resdata.IsOK);\r\n      isok = true;\r\n    } catch (error) {\r\n      console.log(\" setRequest error : \" + error);\r\n    } finally {\r\n      console.log(\" setRequest finally  : \" + isok);\r\n      return isok;\r\n    }\r\n  }\r\n\r\n  //서버에 상태및 정보 요청\r\n  static async getRequest(isensor, isoutdev, isautostate, isautocontrol) {\r\n    let mrepmsg = new responseMessage();\r\n \r\n    try {\r\n      const reqmsg = new reqMessage(\"IF9999\");\r\n      //자동제어  센서목록, 출력목록 다 가져옴\r\n      reqmsg.getAutoControlstate = isautostate;\r\n      reqmsg.getSensors = isensor;\r\n      reqmsg.getOutputport = isoutdev;\r\n      reqmsg.getAutoControl = isautocontrol;\r\n\r\n      const resdata = await IndoorFarmAPI.postData(API + \"farmrequest\", reqmsg);\r\n      \r\n\r\n      resdata.AutoControls.forEach((element) => {\r\n        mrepmsg.AutoControls.push(AutoControl.Clonbyjsonobj(element));\r\n      });\r\n\r\n      resdata.Sensors.forEach((element) => {\r\n        mrepmsg.Sensors.push(Sensordevice.Clonbyjsonobj(element));\r\n      });\r\n\r\n      resdata.Outputs.forEach((element) => {\r\n        mrepmsg.Outputs.push(Outputdevice.Clonbyjsonobj(element));\r\n      });\r\n    } catch (error) {\r\n      console.log(\" getRequest error : \" + error);\r\n    } finally {\r\n      console.log(\" getRequest finally  : \" + mrepmsg);\r\n      return mrepmsg;\r\n    }\r\n  }\r\n\r\n  static async setmanualonoff(moutputport) {\r\n    return await this.setRequest(moutputport, false, false, true);\r\n  }\r\n\r\n  static async setAutocontrolsetup(mAutocfg) {\r\n    return await this.setRequest(mAutocfg, true, false, false);\r\n  }\r\n\r\n  static async setDeviceconfigsetup(mDevcfg) {\r\n    return await this.setRequest(mDevcfg, false, true, false);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Sensordisplay from\"../sensordisplay\";import firebase from\"../firebase.js\";import reqMessage from\"../reqMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var database=firebase.database();var frrequest=database.ref('Sensors/request/message');var frresponse=database.ref('Sensors/response/message');function sendfirebase(){var reqmsg=new reqMessage(\"IF9999\");reqmsg.getSensors=true;console.log(\"send firebase\");frrequest.set(JSON.stringify(reqmsg));}var About=function About(_ref){var role=_ref.role;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),reqvlaue=_useState2[0],requestupdate=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),repvalue=_useState4[0],reponseupdate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),msensorsarray=_useState6[0],setSensors=_useState6[1];console.log(role);useEffect(function(){frrequest.on('value',function(snapshot){var data=snapshot.val();requestupdate(data);console.log(data);});frresponse.on('value',function(snapshot){var data=snapshot.val();reponseupdate(data);var resposemsg=JSON.parse(data);setSensors(resposemsg.Sensors);// console.log(data);\n});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"about Page\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"rool: \",role?\"admin\":\"user\"]}),Sensordisplay(msensorsarray,true),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"request : \",reqvlaue,\" \"]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"response : \",repvalue,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"out_button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button_on\",onClick:function onClick(){return sendfirebase();},children:\"\\uBA54\\uC2DC\\uC9C0\\uC804\\uB2EC\"})})]},\"sdaff\")]});};export default About;","map":{"version":3,"sources":["H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/src/pages/about.js"],"names":["React","useState","useEffect","Sensordisplay","firebase","reqMessage","database","frrequest","ref","frresponse","sendfirebase","reqmsg","getSensors","console","log","set","JSON","stringify","About","role","reqvlaue","requestupdate","repvalue","reponseupdate","msensorsarray","setSensors","on","snapshot","data","val","resposemsg","parse","Sensors"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CAEA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,C,wFAMA,GAAIC,CAAAA,QAAQ,CAAGF,QAAQ,CAACE,QAAT,EAAf,CACA,GAAIC,CAAAA,SAAS,CAAED,QAAQ,CAACE,GAAT,CAAa,yBAAb,CAAf,CACA,GAAIC,CAAAA,UAAU,CAAEH,QAAQ,CAACE,GAAT,CAAa,0BAAb,CAAhB,CAIA,QAASE,CAAAA,YAAT,EAAwB,CAIpB,GAAMC,CAAAA,MAAM,CAAG,GAAIN,CAAAA,UAAJ,CAAe,QAAf,CAAf,CACAM,MAAM,CAACC,UAAP,CAAkB,IAAlB,CACAC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAP,SAAS,CAACQ,GAAV,CAAcC,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAd,EAED,CAMH,GAAMO,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CAEtB,cAAkClB,QAAQ,CAAC,CAAD,CAA1C,wCAAOmB,QAAP,eAAiBC,aAAjB,eACA,eAAkCpB,QAAQ,CAAC,CAAD,CAA1C,yCAAOqB,QAAP,eAAiBC,aAAjB,eAEA,eAAoCtB,QAAQ,CAAC,EAAD,CAA5C,yCAAOuB,aAAP,eAAsBC,UAAtB,eAEAZ,OAAO,CAACC,GAAR,CAAYK,IAAZ,EAGFjB,SAAS,CAAC,UAAM,CAKdK,SAAS,CAACmB,EAAV,CAAa,OAAb,CAAsB,SAACC,QAAD,CAAc,CAChC,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAACE,GAAT,EAAb,CACAR,aAAa,CAACO,IAAD,CAAb,CACAf,OAAO,CAACC,GAAR,CAAYc,IAAZ,EACH,CAJD,EAMAnB,UAAU,CAACiB,EAAX,CAAc,OAAd,CAAuB,SAACC,QAAD,CAAc,CACjC,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAACE,GAAT,EAAb,CACAN,aAAa,CAACK,IAAD,CAAb,CAEA,GAAIE,CAAAA,UAAU,CAAGd,IAAI,CAACe,KAAL,CAAWH,IAAX,CAAjB,CAGAH,UAAU,CAACK,UAAU,CAACE,OAAZ,CAAV,CAED;AACF,CAVD,EAgBD,CA3BQ,CA2BN,EA3BM,CAAT,CA8BE,mBACI,oCACI,kCADJ,cAEI,+BAAWb,IAAI,CAAE,OAAF,CAAU,MAAzB,GAFJ,CAIKhB,aAAa,CAACqB,aAAD,CAAe,IAAf,CAJlB,cAMI,oCACA,mCAAgBJ,QAAhB,OADA,cAGA,oCAAiBE,QAAjB,OAHA,cAMA,YAAK,SAAS,CAAC,YAAf,uBACC,eAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,yBAAMZ,CAAAA,YAAY,EAAlB,EAAvC,4CADD,EANA,GAAS,OAAT,CANJ,GADJ,CAoBH,CA5DD,CA8DA,cAAeQ,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sensordisplay from \"../sensordisplay\";\r\n\r\nimport firebase from \"../firebase.js\";\r\nimport reqMessage from \"../reqMessage\";\r\n\r\n\r\n\r\n\r\n\r\nlet database = firebase.database();\r\nlet frrequest =database.ref('Sensors/request/message');\r\nlet frresponse =database.ref('Sensors/response/message');\r\n\r\n\r\n\r\nfunction sendfirebase() {\r\n\r\n   \r\n\r\n    const reqmsg = new reqMessage(\"IF9999\");\r\n    reqmsg.getSensors=true;\r\n    console.log(\"send firebase\");\r\n    frrequest.set(JSON.stringify(reqmsg));\r\n    \r\n  }\r\n\r\n  \r\n\r\n  \r\n\r\nconst About = ({role}) => {\r\n\r\n    const [reqvlaue, requestupdate] = useState(1);\r\n    const [repvalue, reponseupdate] = useState(1);\r\n\r\n    const [msensorsarray, setSensors] = useState([]);\r\n  \r\n    console.log(role);\r\n\r\n    \r\n  useEffect(() => {\r\n\r\n\r\n\r\n\r\n    frrequest.on('value', (snapshot) => {\r\n        const data = snapshot.val();\r\n        requestupdate(data) ;\r\n        console.log(data);\r\n    });\r\n\r\n    frresponse.on('value', (snapshot) => {\r\n        const data = snapshot.val();\r\n        reponseupdate(data) ;\r\n\r\n        let resposemsg = JSON.parse(data);\r\n\r\n\r\n        setSensors(resposemsg.Sensors);\r\n\r\n       // console.log(data);\r\n    });\r\n\r\n\r\n    \r\n\r\n\r\n  }, []);\r\n\r\n\r\n    return(\r\n        <div>\r\n            <h2>about Page</h2>\r\n            <h3>rool: {role? \"admin\":\"user\"}</h3>\r\n\r\n            {Sensordisplay(msensorsarray,true)}\r\n\r\n            <div key=\"sdaff\">\r\n            <h3 >request : {reqvlaue} </h3>\r\n\r\n            <h3 >response : {repvalue} </h3>\r\n            \r\n\r\n            <div className=\"out_button\">\r\n             <button className=\"button_on\" onClick={() => sendfirebase()}>메시지전달</button> \r\n            </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default About;"]},"metadata":{},"sourceType":"module"}
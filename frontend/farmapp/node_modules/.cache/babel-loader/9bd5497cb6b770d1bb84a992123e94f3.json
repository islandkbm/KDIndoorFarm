{"ast":null,"code":"import _createForOfIteratorHelper from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useState,useEffect}from\"react\";import AutoControlconfig from\"../commonjs/autocontrolconfig\";import AutoControl from\"../commonjs/autocontrol.js\";import IndoorFarmAPI from\"../indoorfarmapi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Autocontrolpage=function Autocontrolpage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mSensors=_useState2[0],setUpdatesensor=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mAutolist=_useState4[0],setUpdateauto=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),mDevices=_useState6[0],setUpdatedevice=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),mSelecteditem=_useState8[0],setupselected=_useState8[1];console.log(\"Autocontrolpage: \");useEffect(function(){IndoorFarmAPI.getautocontrols().then(function(mrsp){setUpdatesensor(mrsp.Sensors);setUpdateauto(mrsp.AutoControls);setUpdatedevice(mrsp.Outputs);});},[]);function secToTime(dayseconds){if(dayseconds>=24*3600){return\"23:59\";}var hour=Math.floor(dayseconds/3600);var min=Math.floor((dayseconds-hour*3600)/60);if(hour<10)hour=\"0\"+hour;if(min<10)min=\"0\"+min;console.log(\"secToTime : \"+(hour+\":\"+min));return hour+\":\"+min;}function timeTosec(timestr){var _timestr$split=timestr.split(\":\"),_timestr$split2=_slicedToArray(_timestr$split,2),hours=_timestr$split2[0],minutes=_timestr$split2[1];return Number(hours*3600+minutes*60);}function Autocontroleditbox(myeditcfg,msensorlist,mdevlist){//const [misTimershow, selectcontrol] = useState(myeditcfg !=null && myeditcfg.istimer);\n//console.log(\"Autocontroleditbox  misTimershow: \" + misTimershow);\nif(myeditcfg==null){return/*#__PURE__*/_jsx(\"div\",{});}else{//selectcontrol(copycfg.istimer);\n//let starttime_sec =/3600)+\":\"+ ((mydata.mConfig.starttime/60)%60);\n//let endtime_sec = (mydata.mConfig.endtime/3600)+\":\"+ ((mydata.mConfig.endtime/60)%60);\nvar setupSave=function setupSave(mcfg){console.log(\"setupSave uid: \"+mcfg.uniqid+\" name : \"+mcfg.name+\" istimer : \"+mcfg.istimer);console.log(\"setupSave uid: \"+\" copycfg istimer : \"+copycfg.istimer);IndoorFarmAPI.setAutocontrolsetup(mcfg).then(function(ret){console.log(\"setAutocontrolsetup  uid: \"+ret);});};var inputonchangeHandler=function inputonchangeHandler(e){console.log(\"inputonchangeHandler : \"+e.target.name);switch(e.target.name){case\"name\":copycfg.name=e.target.value;break;case\"onvalue\":copycfg.onvalue=Number(e.target.value);break;case\"offvalue\":copycfg.offvalue=Number(e.target.value);break;case\"starttime\":copycfg.starttime=timeTosec(e.target.value);break;case\"endtime\":copycfg.endtime=timeTosec(e.target.value);break;case\"controlsel\":if(e.target.checked===true&&e.target.id===\"timer\"){copycfg.istimer=true;}else{copycfg.istimer=false;}setupselected(AutoControlconfig.deepcopy(copycfg));break;case\"autoenable\":if(e.target.checked===true&&e.target.id===\"enable\"){copycfg.enabled=true;}else{copycfg.enabled=false;}//  setupselected(AutoControlconfig.deepcopy(copycfg));\n}if(e.target.name===\"devcheck\"){var isexist=false;for(var i=0;i<copycfg.devids.length;i++){if(copycfg.devids[i]===Number(e.target.id)){if(e.target.checked===false){copycfg.devids.splice(i,1);return;}else{isexist=true;break;}}}//새로추가\nif(isexist===false){copycfg.devids.push(Number(e.target.id));}//console.log({copycfg});\n}};var sensorselectbox=function sensorselectbox(mitem){return/*#__PURE__*/_jsxs(\"ui\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"sensorsel\",defaultChecked:mitem.seleted,id:mitem.uniqkey},copycfg.uniqid),mitem.title]});};var devicecheckbox=function devicecheckbox(mitem){return/*#__PURE__*/_jsxs(\"ui\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"devcheck\",defaultChecked:mitem.seleted,id:mitem.uniqkey},copycfg.uniqid),\" \",mitem.title]});};var copycfg=myeditcfg;// AutoControlconfig.deepcopy(mydata.mConfig);\nconsole.log(\"Autocontroleditbox  copycfg.istimer: \"+copycfg.istimer);var slist=[];var _iterator=_createForOfIteratorHelper(msensorlist),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var ss=_step.value;var seleted=false;if(copycfg.sensorid===ss.UniqID){console.log(\"select sensorid : \"+ss.UniqID);seleted=true;}var title=ss.Name+\"(노드:\"+ss.nodeID+\" , 채널 :\"+ss.channel+\")\";var uniqkey=ss.UniqID;slist.push({title:title,seleted:seleted,uniqkey:uniqkey});}}catch(err){_iterator.e(err);}finally{_iterator.f();}var dlist=[];var _iterator2=_createForOfIteratorHelper(mdevlist),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dev=_step2.value;var _seleted=false;var _iterator3=_createForOfIteratorHelper(copycfg.devids),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var di=_step3.value;if(di==dev.UniqID){console.log(\"select dev id : \"+dev.UniqID);_seleted=true;break;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _title=dev.Name+\"( 채널 :\"+dev.Channel+\")\";var _uniqkey=dev.UniqID;dlist.push({title:_title,seleted:_seleted,uniqkey:_uniqkey});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return/*#__PURE__*/_jsxs(\"div\",{className:\"auto_control\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auto_title\",onChange:inputonchangeHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"auto_name\",children:\"\\uC790\\uB3D9\\uC81C\\uC5B4 \\uC6B4\\uC804\\uBCC0\\uACBD :\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auto_stop\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"autoenable\",defaultChecked:copycfg.enabled,id:\"enable\"},\"enable\"+copycfg.uniqid),\" \\uC790\\uB3D9\\uC6B4\\uC804\",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"autoenable\",defaultChecked:copycfg.enabled===false,id:\"disable\"},\"disable\"+copycfg.uniqid),\" \\uC815\\uC9C0(\\uC218\\uB3D9\\uC81C\\uC5B4)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"autosetupinnerbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auto_input\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"aut_in\",children:[\"\\uC774\\uB984 :\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:copycfg.name,name:\"name\",onChange:inputonchangeHandler},\"name\"+copycfg.uniqid)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"aut_in\",children:[\"\\uC2DC\\uC791\\uC2DC\\uAC04 :\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",defaultValue:secToTime(copycfg.starttime),name:\"starttime\",onChange:inputonchangeHandler},\"starttime\"+copycfg.uniqid)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"aut_in\",children:[\"\\uC885\\uB8CC\\uC2DC\\uAC04 :\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",defaultValue:secToTime(copycfg.endtime),name:\"endtime\",onChange:inputonchangeHandler},\"endtime\"+copycfg.uniqid)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"device\",onChange:inputonchangeHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"dev_name\",children:\"\\uCD9C\\uB825\\uC7A5\\uCE58 \\uC120\\uD0DD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dev_select\",children:dlist.map(function(localState,index){return devicecheckbox(localState);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"two_radio\",onChange:inputonchangeHandler,children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"controlsel\",defaultChecked:copycfg.istimer,id:\"timer\"},\"timer\"+copycfg.uniqid),\" \\uD0C0\\uC784\\uBA38 \\uC81C\\uC5B4\",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"controlsel\",defaultChecked:copycfg.istimer===false,id:\"sensor\"},\"sensor\"+copycfg.uniqid),\"\\uC13C\\uC11C\\uC81C\\uC5B4\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sensorconditionbox\",style:copycfg.istimer===false?{}:{display:\"none\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"con_sen\",onChange:inputonchangeHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"cons_name\",children:\"\\uC13C\\uC11C\\uC120\\uD0DD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cons_radio\",children:slist.map(function(localState,index){return sensorselectbox(localState);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"conditionselectbox\",onChange:inputonchangeHandler,children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"conditionsel\",defaultChecked:copycfg.condition===\"up\",id:\"up\"},\"up\"+copycfg.uniqid),\" \\uD06C\\uBA74\\uCF1C\\uC9D0\",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"conditionsel\",defaultChecked:copycfg.condition===\"down\",id:\"down\"},\"down\"+copycfg.uniqid),\"\\uC791\\uC73C\\uBA74\\uCF1C\\uC9D0\"]}),/*#__PURE__*/_jsx(\"label\",{children:\"\\uCF1C\\uC9D0\\uC870\\uAC74: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:copycfg.onvalue,name:\"onvalue\",onChange:inputonchangeHandler},\"onvalue\"+copycfg.uniqid),/*#__PURE__*/_jsx(\"label\",{children:\"\\uAEBC\\uC9D0\\uC870\\uAC74: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:copycfg.offvalue,name:\"offvalue\",onChange:inputonchangeHandler},\"offvalue\"+copycfg.uniqid)]}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"1\\uD68C\\uAD6C\\uB3D9 \\uCD5C\\uB300\\uAD6C\\uB3D9\\uC2DC\\uAC04: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:copycfg.onetime_run,name:\"onetime_run\",onChange:inputonchangeHandler},\"onetime_run\"+copycfg.uniqid),/*#__PURE__*/_jsx(\"label\",{children:\"1\\uD68C\\uAD6C\\uB3D9\\uD6C4 \\uC26C\\uB294\\uC2DC\\uAC04: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:copycfg.onetime_idle,name:\"onetime_idle\",onChange:inputonchangeHandler},\"onetime_idle\"+copycfg.uniqid)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control_end\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"cont_save\",onClick:function onClick(){return setupSave(copycfg);},id:\"editcheck\",children:[\"\\uC800\\uC7A5\",\" \"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"cont_reset\",onClick:function onClick(){return setupselected(null);},id:\"editcheck\",children:[\"\\uCDE8\\uC18C\",\" \"]})]})]})]});}}function autocontrolbox(mydata){var autostate=/*#__PURE__*/_jsx(\"label\",{className:\"auto_result\",children:\" \\uC815\\uC9C0\\uB428\"});if(mydata.mConfig.enabled===true){var onofficon=\"./image/\"+(mydata.mState.onoffstate?\"on\":\"off\")+\".png\";///<img src={onofficon} className=\"onoff\" />\nautostate=/*#__PURE__*/_jsx(\"label\",{className:\"auto_result\",children:\" \\uC791\\uB3D9\\uC911\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"auto_seln\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"auto_inname\",children:mydata.mConfig.name}),autostate,/*#__PURE__*/_jsx(\"div\",{className:\"auto_change\",children:/*#__PURE__*/_jsx(\"button\",{className:\"change_but\",onClick:function onClick(){return setupselected(AutoControlconfig.deepcopy(mydata.mConfig));},id:\"editcheck\",children:\"\\uC124\\uC815\\uBCC0\\uACBD\"})})]});}function onAdd(){var newauto=new AutoControl(new AutoControlconfig());mAutolist.push(newauto);setUpdateauto(mAutolist);setupselected(newauto.mConfig);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"select\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"select_name\",children:\"\\uC815\\uB82C :\"}),/*#__PURE__*/_jsx(\"div\",{class:\"select_sort\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"sort\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\uC2DC\\uAC04\\uC21C\\uC11C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\uC774\\uB984\\uC21C\\uC11C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\uCE74\\uD14C\\uACE0\\uB9AC\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"select_add\",children:/*#__PURE__*/_jsx(\"button\",{className:\"add_button\",onClick:function onClick(){return onAdd();},children:\"+ \\uCD94\\uAC00\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"autocontroltable\",children:[Autocontroleditbox(mSelecteditem,mSensors,mDevices),mAutolist.map(function(localState,index){return autocontrolbox(localState);})]})]});};export default Autocontrolpage;","map":{"version":3,"sources":["H:/KBM_WORK/indoorfarm_work/sfu3300/KDIndoorFarm/frontend/farmapp/src/pages/autocontrolpage.js"],"names":["React","Component","useState","useEffect","AutoControlconfig","AutoControl","IndoorFarmAPI","Autocontrolpage","mSensors","setUpdatesensor","mAutolist","setUpdateauto","mDevices","setUpdatedevice","mSelecteditem","setupselected","console","log","getautocontrols","then","mrsp","Sensors","AutoControls","Outputs","secToTime","dayseconds","hour","Math","floor","min","timeTosec","timestr","split","hours","minutes","Number","Autocontroleditbox","myeditcfg","msensorlist","mdevlist","setupSave","mcfg","uniqid","name","istimer","copycfg","setAutocontrolsetup","ret","inputonchangeHandler","e","target","value","onvalue","offvalue","starttime","endtime","checked","id","deepcopy","enabled","isexist","i","devids","length","splice","push","sensorselectbox","mitem","seleted","uniqkey","title","devicecheckbox","slist","ss","sensorid","UniqID","Name","nodeID","channel","dlist","dev","di","Channel","map","localState","index","display","condition","onetime_run","onetime_idle","autocontrolbox","mydata","autostate","mConfig","onofficon","mState","onoffstate","onAdd","newauto"],"mappings":"gUAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,SAArC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,iBAAP,KAA8B,+BAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,C,wFAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,cAAoCL,QAAQ,CAAC,EAAD,CAA5C,wCAAOM,QAAP,eAAiBC,eAAjB,eACA,eAAmCP,QAAQ,CAAC,EAAD,CAA3C,yCAAOQ,SAAP,eAAkBC,aAAlB,eACA,eAAoCT,QAAQ,CAAC,EAAD,CAA5C,yCAAOU,QAAP,eAAiBC,eAAjB,eACA,eAAuCX,QAAQ,CAAC,IAAD,CAA/C,yCAAOY,aAAP,eAAsBC,aAAtB,eAEAC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAEAd,SAAS,CAAC,UAAM,CACdG,aAAa,CAACY,eAAd,GAAgCC,IAAhC,CAAqC,SAACC,IAAD,CAAU,CAC7CX,eAAe,CAACW,IAAI,CAACC,OAAN,CAAf,CACAV,aAAa,CAACS,IAAI,CAACE,YAAN,CAAb,CACAT,eAAe,CAACO,IAAI,CAACG,OAAN,CAAf,CACD,CAJD,EAKD,CANQ,CAMN,EANM,CAAT,CAQA,QAASC,CAAAA,SAAT,CAAmBC,UAAnB,CAA+B,CAC7B,GAAIA,UAAU,EAAI,GAAK,IAAvB,CAA6B,CAC3B,MAAO,OAAP,CACD,CACD,GAAIC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,UAAU,CAAG,IAAxB,CAAX,CACA,GAAII,CAAAA,GAAG,CAAGF,IAAI,CAACC,KAAL,CAAW,CAACH,UAAU,CAAGC,IAAI,CAAG,IAArB,EAA6B,EAAxC,CAAV,CACA,GAAIA,IAAI,CAAG,EAAX,CAAeA,IAAI,CAAG,IAAMA,IAAb,CACf,GAAIG,GAAG,CAAG,EAAV,CAAcA,GAAG,CAAG,IAAMA,GAAZ,CACdb,OAAO,CAACC,GAAR,CAAY,gBAAkBS,IAAI,CAAG,GAAP,CAAaG,GAA/B,CAAZ,EACA,MAAOH,CAAAA,IAAI,CAAG,GAAP,CAAaG,GAApB,CACD,CAED,QAASC,CAAAA,SAAT,CAAmBC,OAAnB,CAA4B,CAC1B,mBAAyBA,OAAO,CAACC,KAAR,CAAc,GAAd,CAAzB,kDAAOC,KAAP,oBAAcC,OAAd,oBACA,MAAOC,CAAAA,MAAM,CAACF,KAAK,CAAG,IAAR,CAAeC,OAAO,CAAG,EAA1B,CAAb,CACD,CAED,QAASE,CAAAA,kBAAT,CAA4BC,SAA5B,CAAuCC,WAAvC,CAAoDC,QAApD,CAA8D,CAC5D;AACA;AAEA,GAAIF,SAAS,EAAI,IAAjB,CAAuB,CACrB,mBAAO,cAAP,CACD,CAFD,IAEO,CAKL;AAEA;AACA;AARK,GAUIG,CAAAA,SAVJ,CAUL,QAASA,CAAAA,SAAT,CAAmBC,IAAnB,CAAyB,CACvBzB,OAAO,CAACC,GAAR,CAAY,kBAAoBwB,IAAI,CAACC,MAAzB,CAAkC,UAAlC,CAA+CD,IAAI,CAACE,IAApD,CAA2D,aAA3D,CAA2EF,IAAI,CAACG,OAA5F,EAEA5B,OAAO,CAACC,GAAR,CAAY,kBAAoB,qBAApB,CAA4C4B,OAAO,CAACD,OAAhE,EAEAtC,aAAa,CAACwC,mBAAd,CAAkCL,IAAlC,EAAwCtB,IAAxC,CAA6C,SAAC4B,GAAD,CAAS,CACpD/B,OAAO,CAACC,GAAR,CAAY,6BAA+B8B,GAA3C,EACD,CAFD,EAGD,CAlBI,IAoBIC,CAAAA,oBApBJ,CAoBL,QAASA,CAAAA,oBAAT,CAA8BC,CAA9B,CAAiC,CAC/BjC,OAAO,CAACC,GAAR,CAAY,0BAA4BgC,CAAC,CAACC,MAAF,CAASP,IAAjD,EAEA,OAAQM,CAAC,CAACC,MAAF,CAASP,IAAjB,EACE,IAAK,MAAL,CACEE,OAAO,CAACF,IAAR,CAAeM,CAAC,CAACC,MAAF,CAASC,KAAxB,CACA,MAEF,IAAK,SAAL,CACEN,OAAO,CAACO,OAAR,CAAkBjB,MAAM,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,CACA,MACF,IAAK,UAAL,CACEN,OAAO,CAACQ,QAAR,CAAmBlB,MAAM,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,CACA,MAEF,IAAK,WAAL,CACEN,OAAO,CAACS,SAAR,CAAoBxB,SAAS,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7B,CACA,MACF,IAAK,SAAL,CACEN,OAAO,CAACU,OAAR,CAAkBzB,SAAS,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAA3B,CACA,MAEF,IAAK,YAAL,CACE,GAAIF,CAAC,CAACC,MAAF,CAASM,OAAT,GAAqB,IAArB,EAA6BP,CAAC,CAACC,MAAF,CAASO,EAAT,GAAgB,OAAjD,CAA0D,CACxDZ,OAAO,CAACD,OAAR,CAAkB,IAAlB,CACD,CAFD,IAEO,CACLC,OAAO,CAACD,OAAR,CAAkB,KAAlB,CACD,CAED7B,aAAa,CAACX,iBAAiB,CAACsD,QAAlB,CAA2Bb,OAA3B,CAAD,CAAb,CACA,MACF,IAAK,YAAL,CACE,GAAII,CAAC,CAACC,MAAF,CAASM,OAAT,GAAqB,IAArB,EAA6BP,CAAC,CAACC,MAAF,CAASO,EAAT,GAAgB,QAAjD,CAA2D,CACzDZ,OAAO,CAACc,OAAR,CAAkB,IAAlB,CACD,CAFD,IAEO,CACLd,OAAO,CAACc,OAAR,CAAkB,KAAlB,CACD,CAEH;AAnCF,CAsCA,GAAIV,CAAC,CAACC,MAAF,CAASP,IAAT,GAAkB,UAAtB,CAAkC,CAChC,GAAIiB,CAAAA,OAAO,CAAG,KAAd,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGhB,OAAO,CAACiB,MAAR,CAAeC,MAAnC,CAA2CF,CAAC,EAA5C,CAAgD,CAC9C,GAAIhB,OAAO,CAACiB,MAAR,CAAeD,CAAf,IAAsB1B,MAAM,CAACc,CAAC,CAACC,MAAF,CAASO,EAAV,CAAhC,CAA+C,CAC7C,GAAIR,CAAC,CAACC,MAAF,CAASM,OAAT,GAAqB,KAAzB,CAAgC,CAC9BX,OAAO,CAACiB,MAAR,CAAeE,MAAf,CAAsBH,CAAtB,CAAyB,CAAzB,EACA,OACD,CAHD,IAGO,CACLD,OAAO,CAAG,IAAV,CACA,MACD,CACF,CACF,CACD;AACA,GAAIA,OAAO,GAAK,KAAhB,CAAuB,CACrBf,OAAO,CAACiB,MAAR,CAAeG,IAAf,CAAoB9B,MAAM,CAACc,CAAC,CAACC,MAAF,CAASO,EAAV,CAA1B,EACD,CACD;AACD,CACF,CAhFI,IAkFIS,CAAAA,eAlFJ,CAkFL,QAASA,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC9B,mBACE,mCACE,cAAO,IAAI,CAAC,OAAZ,CAAyC,IAAI,CAAC,WAA9C,CAA0D,cAAc,CAAEA,KAAK,CAACC,OAAhF,CAAyF,EAAE,CAAED,KAAK,CAACE,OAAnG,EAAyBxB,OAAO,CAACH,MAAjC,CADF,CAEGyB,KAAK,CAACG,KAFT,GADF,CAMD,CAzFI,IA2FIC,CAAAA,cA3FJ,CA2FL,QAASA,CAAAA,cAAT,CAAwBJ,KAAxB,CAA+B,CAC7B,mBACE,mCACE,cAAO,IAAI,CAAC,UAAZ,CAA4C,IAAI,CAAC,UAAjD,CAA4D,cAAc,CAAEA,KAAK,CAACC,OAAlF,CAA2F,EAAE,CAAED,KAAK,CAACE,OAArG,EAA4BxB,OAAO,CAACH,MAApC,CADF,KACoHyB,KAAK,CAACG,KAD1H,GADF,CAKD,CAjGI,CACL,GAAIzB,CAAAA,OAAO,CAAGR,SAAd,CAAyB;AAEzBrB,OAAO,CAACC,GAAR,CAAY,wCAA0C4B,OAAO,CAACD,OAA9D,EAgGA,GAAI4B,CAAAA,KAAK,CAAG,EAAZ,CAnGK,yCAoGYlC,WApGZ,YAoGL,+CAA8B,IAAnBmC,CAAAA,EAAmB,aAC5B,GAAIL,CAAAA,OAAO,CAAG,KAAd,CACA,GAAIvB,OAAO,CAAC6B,QAAR,GAAqBD,EAAE,CAACE,MAA5B,CAAoC,CAClC3D,OAAO,CAACC,GAAR,CAAY,qBAAuBwD,EAAE,CAACE,MAAtC,EACAP,OAAO,CAAG,IAAV,CACD,CACD,GAAME,CAAAA,KAAK,CAAGG,EAAE,CAACG,IAAH,CAAU,MAAV,CAAmBH,EAAE,CAACI,MAAtB,CAA+B,SAA/B,CAA2CJ,EAAE,CAACK,OAA9C,CAAwD,GAAtE,CACA,GAAMT,CAAAA,OAAO,CAAGI,EAAE,CAACE,MAAnB,CACAH,KAAK,CAACP,IAAN,CAAW,CAAEK,KAAK,CAAEA,KAAT,CAAgBF,OAAO,CAAEA,OAAzB,CAAkCC,OAAO,CAAEA,OAA3C,CAAX,EACD,CA7GI,qDA+GL,GAAIU,CAAAA,KAAK,CAAG,EAAZ,CA/GK,0CAgHaxC,QAhHb,aAgHL,kDAA4B,IAAjByC,CAAAA,GAAiB,cAC1B,GAAIZ,CAAAA,QAAO,CAAG,KAAd,CAD0B,0CAGTvB,OAAO,CAACiB,MAHC,aAG1B,kDAAiC,IAAtBmB,CAAAA,EAAsB,cAC/B,GAAIA,EAAE,EAAID,GAAG,CAACL,MAAd,CAAsB,CACpB3D,OAAO,CAACC,GAAR,CAAY,mBAAqB+D,GAAG,CAACL,MAArC,EACAP,QAAO,CAAG,IAAV,CACA,MACD,CACF,CATyB,uDAU1B,GAAME,CAAAA,MAAK,CAAGU,GAAG,CAACJ,IAAJ,CAAW,QAAX,CAAsBI,GAAG,CAACE,OAA1B,CAAoC,GAAlD,CACA,GAAMb,CAAAA,QAAO,CAAGW,GAAG,CAACL,MAApB,CAEAI,KAAK,CAACd,IAAN,CAAW,CAAEK,KAAK,CAAEA,MAAT,CAAgBF,OAAO,CAAEA,QAAzB,CAAkCC,OAAO,CAAEA,QAA3C,CAAX,EACD,CA9HI,uDAgIL,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,aAAK,SAAS,CAAC,YAAf,CAA4B,QAAQ,CAAErB,oBAAtC,wBACE,YAAK,SAAS,CAAC,WAAf,iEADF,cAEE,aAAK,SAAS,CAAC,WAAf,wBACE,cAAO,IAAI,CAAC,OAAZ,CAAoD,IAAI,CAAC,YAAzD,CAAsE,cAAc,CAAEH,OAAO,CAACc,OAA9F,CAAuG,EAAE,CAAC,QAA1G,EAAyB,SAAWd,OAAO,CAACH,MAA5C,CADF,0CAEE,cAAO,IAAI,CAAC,OAAZ,CAAqD,IAAI,CAAC,YAA1D,CAAuE,cAAc,CAAEG,OAAO,CAACc,OAAR,GAAoB,KAA3G,CAAkH,EAAE,CAAC,SAArH,EAAyB,UAAYd,OAAO,CAACH,MAA7C,CAFF,6CAFF,GADF,cASE,aAAK,SAAS,CAAC,mBAAf,wBACE,aAAK,SAAS,CAAC,YAAf,wBACE,aAAK,SAAS,CAAC,QAAf,yCAEE,cAAO,IAAI,CAAC,MAAZ,CAAiD,YAAY,CAAEG,OAAO,CAACF,IAAvE,CAA6E,IAAI,CAAC,MAAlF,CAAyF,QAAQ,CAAEK,oBAAnG,EAAwB,OAASH,OAAO,CAACH,MAAzC,CAFF,GADF,cAKE,aAAK,SAAS,CAAC,QAAf,qDAEE,cAAO,IAAI,CAAC,MAAZ,CAAsD,YAAY,CAAElB,SAAS,CAACqB,OAAO,CAACS,SAAT,CAA7E,CAAkG,IAAI,CAAC,WAAvG,CAAmH,QAAQ,CAAEN,oBAA7H,EAAwB,YAAcH,OAAO,CAACH,MAA9C,CAFF,GALF,cASE,aAAK,SAAS,CAAC,QAAf,qDAEE,cAAO,IAAI,CAAC,MAAZ,CAAoD,YAAY,CAAElB,SAAS,CAACqB,OAAO,CAACU,OAAT,CAA3E,CAA8F,IAAI,CAAC,SAAnG,CAA6G,QAAQ,CAAEP,oBAAvH,EAAwB,UAAYH,OAAO,CAACH,MAA5C,CAFF,GATF,GADF,cAgBE,aAAK,SAAS,CAAC,QAAf,CAAwB,QAAQ,CAAEM,oBAAlC,wBACE,YAAK,SAAS,CAAC,UAAf,mDADF,cAEE,YAAK,SAAS,CAAC,YAAf,UAA6B+B,KAAK,CAACI,GAAN,CAAU,SAACC,UAAD,CAAaC,KAAb,QAAuBd,CAAAA,cAAc,CAACa,UAAD,CAArC,EAAV,CAA7B,EAFF,GAhBF,cAqBE,oCACE,aAAK,SAAS,CAAC,WAAf,CAA2B,QAAQ,CAAEpC,oBAArC,wBACE,cAAO,IAAI,CAAC,OAAZ,CAAmD,IAAI,CAAC,YAAxD,CAAqE,cAAc,CAAEH,OAAO,CAACD,OAA7F,CAAsG,EAAE,CAAC,OAAzG,EAAyB,QAAUC,OAAO,CAACH,MAA3C,CADF,iDAEE,cAAO,IAAI,CAAC,OAAZ,CAAoD,IAAI,CAAC,YAAzD,CAAsE,cAAc,CAAEG,OAAO,CAACD,OAAR,GAAoB,KAA1G,CAAiH,EAAE,CAAC,QAApH,EAAyB,SAAWC,OAAO,CAACH,MAA5C,CAFF,8BADF,cAOE,aAAK,SAAS,CAAC,oBAAf,CAAoC,KAAK,CAAEG,OAAO,CAACD,OAAR,GAAoB,KAApB,CAA4B,EAA5B,CAAiC,CAAE0C,OAAO,CAAE,MAAX,CAA5E,wBACE,aAAK,SAAS,CAAC,SAAf,CAAyB,QAAQ,CAAEtC,oBAAnC,wBACE,YAAK,SAAS,CAAC,WAAf,sCADF,cAEE,YAAK,SAAS,CAAC,YAAf,UAA6BwB,KAAK,CAACW,GAAN,CAAU,SAACC,UAAD,CAAaC,KAAb,QAAuBnB,CAAAA,eAAe,CAACkB,UAAD,CAAtC,EAAV,CAA7B,EAFF,GADF,cAME,aAAK,SAAS,CAAC,oBAAf,CAAoC,QAAQ,CAAEpC,oBAA9C,wBACE,cAAO,IAAI,CAAC,OAAZ,CAAgD,IAAI,CAAC,cAArD,CAAoE,cAAc,CAAEH,OAAO,CAAC0C,SAAR,GAAsB,IAA1G,CAAgH,EAAE,CAAC,IAAnH,EAAyB,KAAO1C,OAAO,CAACH,MAAxC,CADF,0CAEE,cAAO,IAAI,CAAC,OAAZ,CAAkD,IAAI,CAAC,cAAvD,CAAsE,cAAc,CAAEG,OAAO,CAAC0C,SAAR,GAAsB,MAA5G,CAAoH,EAAE,CAAC,MAAvH,EAAyB,OAAS1C,OAAO,CAACH,MAA1C,CAFF,oCANF,cAYE,qDAZF,cAaE,cAAO,IAAI,CAAC,QAAZ,CAAsD,YAAY,CAAEG,OAAO,CAACO,OAA5E,CAAqF,IAAI,CAAC,SAA1F,CAAoG,QAAQ,CAAEJ,oBAA9G,EAA0B,UAAYH,OAAO,CAACH,MAA9C,CAbF,cAcE,qDAdF,cAeE,cAAO,IAAI,CAAC,QAAZ,CAAuD,YAAY,CAAEG,OAAO,CAACQ,QAA7E,CAAuF,IAAI,CAAC,UAA5F,CAAuG,QAAQ,CAAEL,oBAAjH,EAA0B,WAAaH,OAAO,CAACH,MAA/C,CAfF,GAPF,cAwBE,YAxBF,cAyBE,qFAzBF,cA0BE,cAAO,IAAI,CAAC,QAAZ,CAA0D,YAAY,CAAEG,OAAO,CAAC2C,WAAhF,CAA6F,IAAI,CAAC,aAAlG,CAAgH,QAAQ,CAAExC,oBAA1H,EAA0B,cAAgBH,OAAO,CAACH,MAAlD,CA1BF,cA4BE,+EA5BF,cA6BE,cAAO,IAAI,CAAC,QAAZ,CAA2D,YAAY,CAAEG,OAAO,CAAC4C,YAAjF,CAA+F,IAAI,CAAC,cAApG,CAAmH,QAAQ,CAAEzC,oBAA7H,EAA0B,eAAiBH,OAAO,CAACH,MAAnD,CA7BF,GArBF,cAqDE,aAAK,SAAS,CAAC,aAAf,wBACE,gBAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,yBAAMF,CAAAA,SAAS,CAACK,OAAD,CAAf,EAAvC,CAAiE,EAAE,CAAC,WAApE,0BACK,GADL,GADF,cAIE,gBAAQ,SAAS,CAAC,YAAlB,CAA+B,OAAO,CAAE,yBAAM9B,CAAAA,aAAa,CAAC,IAAD,CAAnB,EAAxC,CAAmE,EAAE,CAAC,WAAtE,0BACK,GADL,GAJF,GArDF,GATF,GADF,CA0ED,CACF,CACD,QAAS2E,CAAAA,cAAT,CAAwBC,MAAxB,CAAgC,CAC9B,GAAIC,CAAAA,SAAS,cAAG,cAAO,SAAS,CAAC,aAAjB,iCAAhB,CAEA,GAAID,MAAM,CAACE,OAAP,CAAelC,OAAf,GAA2B,IAA/B,CAAqC,CACnC,GAAImC,CAAAA,SAAS,CAAG,YAAcH,MAAM,CAACI,MAAP,CAAcC,UAAd,CAA2B,IAA3B,CAAkC,KAAhD,EAAyD,MAAzE,CAEA;AACAJ,SAAS,cAAG,cAAO,SAAS,CAAC,aAAjB,iCAAZ,CACD,CAED,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,cAAO,SAAS,CAAC,aAAjB,UAAgCD,MAAM,CAACE,OAAP,CAAelD,IAA/C,EADF,CAGGiD,SAHH,cAIE,YAAK,SAAS,CAAC,aAAf,uBACE,eAAQ,SAAS,CAAC,YAAlB,CAA+B,OAAO,CAAE,yBAAM7E,CAAAA,aAAa,CAACX,iBAAiB,CAACsD,QAAlB,CAA2BiC,MAAM,CAACE,OAAlC,CAAD,CAAnB,EAAxC,CAAyG,EAAE,CAAC,WAA5G,sCADF,EAJF,GADF,CAYD,CAED,QAASI,CAAAA,KAAT,EAAiB,CACf,GAAIC,CAAAA,OAAO,CAAG,GAAI7F,CAAAA,WAAJ,CAAgB,GAAID,CAAAA,iBAAJ,EAAhB,CAAd,CACAM,SAAS,CAACuD,IAAV,CAAeiC,OAAf,EACAvF,aAAa,CAACD,SAAD,CAAb,CACAK,aAAa,CAACmF,OAAO,CAACL,OAAT,CAAb,CACD,CAED,mBACE,oCACE,YAAK,SAAS,CAAC,MAAf,uBACE,aAAK,SAAS,CAAC,QAAf,wBACE,YAAK,SAAS,CAAC,aAAf,4BADF,cAEE,YAAK,KAAK,CAAC,aAAX,uBACE,gBAAQ,IAAI,CAAC,MAAb,wBACE,eAAQ,KAAK,CAAC,GAAd,sCADF,cAEE,eAAQ,KAAK,CAAC,GAAd,sCAFF,cAGE,eAAQ,KAAK,CAAC,GAAd,sCAHF,GADF,EAFF,cASE,YAAK,SAAS,CAAC,YAAf,uBACE,eAAQ,SAAS,CAAC,YAAlB,CAA+B,OAAO,CAAE,yBAAMI,CAAAA,KAAK,EAAX,EAAxC,4BADF,EATF,GADF,EADF,cAkBE,aAAK,SAAS,CAAC,kBAAf,WACG7D,kBAAkB,CAACtB,aAAD,CAAgBN,QAAhB,CAA0BI,QAA1B,CADrB,CAGGF,SAAS,CAACyE,GAAV,CAAc,SAACC,UAAD,CAAaC,KAAb,QAAuBK,CAAAA,cAAc,CAACN,UAAD,CAArC,EAAd,CAHH,GAlBF,GADF,CA0BD,CA5SD,CA8SA,cAAe7E,CAAAA,eAAf","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport AutoControlconfig from \"../commonjs/autocontrolconfig\";\r\nimport AutoControl from \"../commonjs/autocontrol.js\";\r\nimport IndoorFarmAPI from \"../indoorfarmapi\";\r\n\r\nconst Autocontrolpage = () => {\r\n  const [mSensors, setUpdatesensor] = useState([]);\r\n  const [mAutolist, setUpdateauto] = useState([]);\r\n  const [mDevices, setUpdatedevice] = useState([]);\r\n  const [mSelecteditem, setupselected] = useState(null);\r\n\r\n  console.log(\"Autocontrolpage: \");\r\n\r\n  useEffect(() => {\r\n    IndoorFarmAPI.getautocontrols().then((mrsp) => {\r\n      setUpdatesensor(mrsp.Sensors);\r\n      setUpdateauto(mrsp.AutoControls);\r\n      setUpdatedevice(mrsp.Outputs);\r\n    });\r\n  }, []);\r\n\r\n  function secToTime(dayseconds) {\r\n    if (dayseconds >= 24 * 3600) {\r\n      return \"23:59\";\r\n    }\r\n    let hour = Math.floor(dayseconds / 3600);\r\n    let min = Math.floor((dayseconds - hour * 3600) / 60);\r\n    if (hour < 10) hour = \"0\" + hour;\r\n    if (min < 10) min = \"0\" + min;\r\n    console.log(\"secToTime : \" + (hour + \":\" + min));\r\n    return hour + \":\" + min;\r\n  }\r\n\r\n  function timeTosec(timestr) {\r\n    const [hours, minutes] = timestr.split(\":\");\r\n    return Number(hours * 3600 + minutes * 60);\r\n  }\r\n\r\n  function Autocontroleditbox(myeditcfg, msensorlist, mdevlist) {\r\n    //const [misTimershow, selectcontrol] = useState(myeditcfg !=null && myeditcfg.istimer);\r\n    //console.log(\"Autocontroleditbox  misTimershow: \" + misTimershow);\r\n\r\n    if (myeditcfg == null) {\r\n      return <div></div>;\r\n    } else {\r\n      let copycfg = myeditcfg; // AutoControlconfig.deepcopy(mydata.mConfig);\r\n\r\n      console.log(\"Autocontroleditbox  copycfg.istimer: \" + copycfg.istimer);\r\n\r\n      //selectcontrol(copycfg.istimer);\r\n\r\n      //let starttime_sec =/3600)+\":\"+ ((mydata.mConfig.starttime/60)%60);\r\n      //let endtime_sec = (mydata.mConfig.endtime/3600)+\":\"+ ((mydata.mConfig.endtime/60)%60);\r\n\r\n      function setupSave(mcfg) {\r\n        console.log(\"setupSave uid: \" + mcfg.uniqid + \" name : \" + mcfg.name + \" istimer : \" + mcfg.istimer);\r\n\r\n        console.log(\"setupSave uid: \" + \" copycfg istimer : \" + copycfg.istimer);\r\n\r\n        IndoorFarmAPI.setAutocontrolsetup(mcfg).then((ret) => {\r\n          console.log(\"setAutocontrolsetup  uid: \" + ret);\r\n        });\r\n      }\r\n\r\n      function inputonchangeHandler(e) {\r\n        console.log(\"inputonchangeHandler : \" + e.target.name);\r\n\r\n        switch (e.target.name) {\r\n          case \"name\":\r\n            copycfg.name = e.target.value;\r\n            break;\r\n\r\n          case \"onvalue\":\r\n            copycfg.onvalue = Number(e.target.value);\r\n            break;\r\n          case \"offvalue\":\r\n            copycfg.offvalue = Number(e.target.value);\r\n            break;\r\n\r\n          case \"starttime\":\r\n            copycfg.starttime = timeTosec(e.target.value);\r\n            break;\r\n          case \"endtime\":\r\n            copycfg.endtime = timeTosec(e.target.value);\r\n            break;\r\n\r\n          case \"controlsel\":\r\n            if (e.target.checked === true && e.target.id === \"timer\") {\r\n              copycfg.istimer = true;\r\n            } else {\r\n              copycfg.istimer = false;\r\n            }\r\n\r\n            setupselected(AutoControlconfig.deepcopy(copycfg));\r\n            break;\r\n          case \"autoenable\":\r\n            if (e.target.checked === true && e.target.id === \"enable\") {\r\n              copycfg.enabled = true;\r\n            } else {\r\n              copycfg.enabled = false;\r\n            }\r\n\r\n          //  setupselected(AutoControlconfig.deepcopy(copycfg));\r\n        }\r\n\r\n        if (e.target.name === \"devcheck\") {\r\n          let isexist = false;\r\n          for (let i = 0; i < copycfg.devids.length; i++) {\r\n            if (copycfg.devids[i] === Number(e.target.id)) {\r\n              if (e.target.checked === false) {\r\n                copycfg.devids.splice(i, 1);\r\n                return;\r\n              } else {\r\n                isexist = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          //새로추가\r\n          if (isexist === false) {\r\n            copycfg.devids.push(Number(e.target.id));\r\n          }\r\n          //console.log({copycfg});\r\n        }\r\n      }\r\n\r\n      function sensorselectbox(mitem) {\r\n        return (\r\n          <ui>\r\n            <input type=\"radio\" key={copycfg.uniqid} name=\"sensorsel\" defaultChecked={mitem.seleted} id={mitem.uniqkey} />\r\n            {mitem.title}\r\n          </ui>\r\n        );\r\n      }\r\n\r\n      function devicecheckbox(mitem) {\r\n        return (\r\n          <ui>\r\n            <input type=\"checkbox\" key={copycfg.uniqid} name=\"devcheck\" defaultChecked={mitem.seleted} id={mitem.uniqkey} /> {mitem.title}\r\n          </ui>\r\n        );\r\n      }\r\n\r\n      let slist = [];\r\n      for (const ss of msensorlist) {\r\n        let seleted = false;\r\n        if (copycfg.sensorid === ss.UniqID) {\r\n          console.log(\"select sensorid : \" + ss.UniqID);\r\n          seleted = true;\r\n        }\r\n        const title = ss.Name + \"(노드:\" + ss.nodeID + \" , 채널 :\" + ss.channel + \")\";\r\n        const uniqkey = ss.UniqID;\r\n        slist.push({ title: title, seleted: seleted, uniqkey: uniqkey });\r\n      }\r\n\r\n      let dlist = [];\r\n      for (const dev of mdevlist) {\r\n        let seleted = false;\r\n\r\n        for (const di of copycfg.devids) {\r\n          if (di == dev.UniqID) {\r\n            console.log(\"select dev id : \" + dev.UniqID);\r\n            seleted = true;\r\n            break;\r\n          }\r\n        }\r\n        const title = dev.Name + \"( 채널 :\" + dev.Channel + \")\";\r\n        const uniqkey = dev.UniqID;\r\n\r\n        dlist.push({ title: title, seleted: seleted, uniqkey: uniqkey });\r\n      }\r\n\r\n      return (\r\n        <div className=\"auto_control\">\r\n          <div className=\"auto_title\" onChange={inputonchangeHandler}>\r\n            <div className=\"auto_name\">자동제어 운전변경 :</div>\r\n            <div className=\"auto_stop\">\r\n              <input type=\"radio\" key={\"enable\" + copycfg.uniqid} name=\"autoenable\" defaultChecked={copycfg.enabled} id=\"enable\" /> 자동운전\r\n              <input type=\"radio\" key={\"disable\" + copycfg.uniqid} name=\"autoenable\" defaultChecked={copycfg.enabled === false} id=\"disable\" /> 정지(수동제어)\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"autosetupinnerbox\">\r\n            <div className=\"auto_input\">\r\n              <div className=\"aut_in\">\r\n                이름 :\r\n                <input type=\"text\" key={\"name\" + copycfg.uniqid} defaultValue={copycfg.name} name=\"name\" onChange={inputonchangeHandler} />\r\n              </div>\r\n              <div className=\"aut_in\">\r\n                시작시간 :\r\n                <input type=\"time\" key={\"starttime\" + copycfg.uniqid} defaultValue={secToTime(copycfg.starttime)} name=\"starttime\" onChange={inputonchangeHandler} />\r\n              </div>\r\n              <div className=\"aut_in\">\r\n                종료시간 :\r\n                <input type=\"time\" key={\"endtime\" + copycfg.uniqid} defaultValue={secToTime(copycfg.endtime)} name=\"endtime\" onChange={inputonchangeHandler} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"device\" onChange={inputonchangeHandler}>\r\n              <div className=\"dev_name\">출력장치 선택</div>\r\n              <div className=\"dev_select\">{dlist.map((localState, index) => devicecheckbox(localState))}</div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"two_radio\" onChange={inputonchangeHandler}>\r\n                <input type=\"radio\" key={\"timer\" + copycfg.uniqid} name=\"controlsel\" defaultChecked={copycfg.istimer} id=\"timer\" /> 타임머 제어\r\n                <input type=\"radio\" key={\"sensor\" + copycfg.uniqid} name=\"controlsel\" defaultChecked={copycfg.istimer === false} id=\"sensor\" />\r\n                센서제어\r\n              </div>\r\n\r\n              <div className=\"sensorconditionbox\" style={copycfg.istimer === false ? {} : { display: \"none\" }}>\r\n                <div className=\"con_sen\" onChange={inputonchangeHandler}>\r\n                  <div className=\"cons_name\">센서선택</div>\r\n                  <div className=\"cons_radio\">{slist.map((localState, index) => sensorselectbox(localState))}</div>\r\n                </div>\r\n\r\n                <div className=\"conditionselectbox\" onChange={inputonchangeHandler}>\r\n                  <input type=\"radio\" key={\"up\" + copycfg.uniqid} name=\"conditionsel\" defaultChecked={copycfg.condition === \"up\"} id=\"up\" /> 크면켜짐\r\n                  <input type=\"radio\" key={\"down\" + copycfg.uniqid} name=\"conditionsel\" defaultChecked={copycfg.condition === \"down\"} id=\"down\" />\r\n                  작으면켜짐\r\n                </div>\r\n\r\n                <label>켜짐조건: </label>\r\n                <input type=\"number\" key={\"onvalue\" + copycfg.uniqid} defaultValue={copycfg.onvalue} name=\"onvalue\" onChange={inputonchangeHandler} />\r\n                <label>꺼짐조건: </label>\r\n                <input type=\"number\" key={\"offvalue\" + copycfg.uniqid} defaultValue={copycfg.offvalue} name=\"offvalue\" onChange={inputonchangeHandler} />\r\n              </div>\r\n              <p></p>\r\n              <label>1회구동 최대구동시간: </label>\r\n              <input type=\"number\" key={\"onetime_run\" + copycfg.uniqid} defaultValue={copycfg.onetime_run} name=\"onetime_run\" onChange={inputonchangeHandler} />\r\n\r\n              <label>1회구동후 쉬는시간: </label>\r\n              <input type=\"number\" key={\"onetime_idle\" + copycfg.uniqid} defaultValue={copycfg.onetime_idle} name=\"onetime_idle\" onChange={inputonchangeHandler} />\r\n            </div>\r\n\r\n            <div className=\"control_end\">\r\n              <button className=\"cont_save\" onClick={() => setupSave(copycfg)} id=\"editcheck\">\r\n                저장{\" \"}\r\n              </button>\r\n              <button className=\"cont_reset\" onClick={() => setupselected(null)} id=\"editcheck\">\r\n                취소{\" \"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  function autocontrolbox(mydata) {\r\n    let autostate = <label className=\"auto_result\"> 정지됨</label>;\r\n\r\n    if (mydata.mConfig.enabled === true) {\r\n      let onofficon = \"./image/\" + (mydata.mState.onoffstate ? \"on\" : \"off\") + \".png\";\r\n\r\n      ///<img src={onofficon} className=\"onoff\" />\r\n      autostate = <label className=\"auto_result\"> 작동중</label>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"auto_seln\">\r\n        <label className=\"auto_inname\">{mydata.mConfig.name}</label>\r\n\r\n        {autostate}\r\n        <div className=\"auto_change\">\r\n          <button className=\"change_but\" onClick={() => setupselected(AutoControlconfig.deepcopy(mydata.mConfig))} id=\"editcheck\">\r\n            설정변경\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function onAdd() {\r\n    let newauto = new AutoControl(new AutoControlconfig());\r\n    mAutolist.push(newauto);\r\n    setUpdateauto(mAutolist);\r\n    setupselected(newauto.mConfig);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"auto\">\r\n        <div className=\"select\">\r\n          <div className=\"select_name\">정렬 :</div>\r\n          <div class=\"select_sort\">\r\n            <select name=\"sort\">\r\n              <option value=\"1\">시간순서</option>\r\n              <option value=\"2\">이름순서</option>\r\n              <option value=\"3\">카테고리</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"select_add\">\r\n            <button className=\"add_button\" onClick={() => onAdd()}>\r\n              + 추가\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"autocontroltable\">\r\n        {Autocontroleditbox(mSelecteditem, mSensors, mDevices)}\r\n\r\n        {mAutolist.map((localState, index) => autocontrolbox(localState))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Autocontrolpage;\r\n"]},"metadata":{},"sourceType":"module"}